<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
        }
        #buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }
        #display {
            text-align: right;
            margin-bottom: 20px;
            width: 100%;
            max-width: 200px;
        }
        #log {
            margin-top: 20px;
            max-width: 200px;
            text-align: left;
        }
    </style>
    <title>計算機</title>
</head>
<body>

<h1>シンプルな計算機</h1>

<input id="display" type="text" readonly>

<br>

<div id="buttons">
    <button onclick="appendNumber(7)">7</button>
    <button onclick="appendNumber(8)">8</button>
    <button onclick="appendNumber(9)">9</button>
    <button onclick="setOperator('+')">+</button>
    <button onclick="appendNumber(4)">4</button>
    <button onclick="appendNumber(5)">5</button>
    <button onclick="appendNumber(6)">6</button>
    <button onclick="setOperator('-')">-</button>
    <button onclick="appendNumber(1)">1</button>
    <button onclick="appendNumber(2)">2</button>
    <button onclick="appendNumber(3)">3</button>
    <button onclick="setOperator('*')">*</button>
    <button onclick="appendNumber(0)">0</button>
    <button onclick="calculate()">=</button>
    <button onclick="clearDisplay()">C</button>
    <button onclick="setOperator('/')">/</button>
</div>

<a href="welcome.html">ウェルカムに戻る</a>

<div id="log"></div>

<script>
let operand1 = '';
let operand2 = '';
let operator = null;

function appendNumber(number) {
    if (operator === null) {
        operand1 += number;
    } else {
        operand2 += number;
    }
    updateDisplay();
}

function setOperator(op) {
    if (operand1 !== '') {
        operator = op;
    }
    updateDisplay();
}

function calculate() {
    let result;
    switch (operator) {
        case '+':
            result = parseInt(operand1) + parseInt(operand2);
            break;
        case '-':
            result = parseInt(operand1) - parseInt(operand2);
            break;
        case '*':
            result = parseInt(operand1) * parseInt(operand2);
            break;
        case '/':
            result = parseInt(operand1) / parseInt(operand2);
            break;
    }
    logCalculation(operand1, operator, operand2, result);
    operand1 = result;
    operand2 = '';
    operator = null;
    updateDisplay();
}

function clearDisplay() {
    operand1 = '';
    operand2 = '';
    operator = null;
    updateDisplay();
}

function updateDisplay() {
    let displayValue = operand1;
    if (operator !== null) {
        displayValue += operator;
    }
    if (operand2 !== '') {
        displayValue += operand2;
    }
    document.getElementById('display').value = displayValue;
}

function logCalculation(op1, operator, op2, result) {
    const logDiv = document.getElementById('log');
    const logEntry = document.createElement('div');
    logEntry.textContent = `${op1} ${operator} ${op2} = ${result}`;
    logDiv.appendChild(logEntry);
}
</script>

</body>
</html>
